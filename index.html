<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador del Teorema Central del L√≠mite</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .content {
            padding: 30px;
        }
        
        .info-box {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(116, 185, 255, 0.3);
        }
        
        .controls {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .controls h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        
        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .control-group {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        
        .control-group label {
            display: block;
            font-weight: bold;
            color: #495057;
            margin-bottom: 10px;
        }
        
        .control-group input[type="range"] {
            width: 100%;
            margin: 10px 0;
            accent-color: #667eea;
        }
        
        .control-group select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            background: white;
            font-size: 14px;
        }
        
        .value-display {
            background: #667eea;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: bold;
            min-width: 50px;
            text-align: center;
            margin-left: 10px;
            display: inline-block;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .visualization {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .chart-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .chart-card h3 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }
        
        .chart {
            width: 100%;
            min-height: 250px;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            background: #f8f9fa;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            line-height: 1.2;
            overflow-x: auto;
        }
        
        .results {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .results h2 {
            margin-bottom: 20px;
            text-align: center;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .result-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }
        
        .result-label {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .result-value {
            font-size: 1.2em;
            color: #a7f3d0;
        }
        
        .sample-controls {
            text-align: center;
            margin-top: 15px;
        }
        
        .sample-btn {
            background: #00b894;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 15px;
            margin: 0 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .sample-btn:hover {
            background: #00a085;
        }
        
        .sample-info {
            margin: 0 15px;
            font-weight: bold;
            color: #495057;
        }
        
        .explanation {
            background: #f8f9fa;
            border-left: 5px solid #667eea;
            padding: 25px;
            border-radius: 0 10px 10px 0;
        }
        
        .explanation h2, .explanation h3, .explanation h4 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .explanation ul {
            margin: 15px 0;
            padding-left: 25px;
        }
        
        .explanation li {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        .formula {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
        }
        
        .concept-box {
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid;
        }
        
        .concept-box.teorico {
            background: #e8f5e8;
            border-left-color: #28a745;
        }
        
        .concept-box.empirico {
            background: #fff3cd;
            border-left-color: #ffc107;
        }
        
        .concept-box.importante {
            background: #f8d7da;
            border-left-color: #dc3545;
        }
        
        .concept-box.ejemplo {
            background: #d1ecf1;
            border-left-color: #0dcaf0;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .control-grid {
                grid-template-columns: 1fr;
            }
            
            .buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Simulador del Teorema Central del L√≠mite</h1>
            <p>Visualizaci√≥n Interactiva del TCL y Error Est√°ndar</p>
        </div>
        
        <div class="content">
            <div class="info-box">
                <p><strong>üìä Esta aplicaci√≥n demuestra el Teorema Central del L√≠mite y el concepto de Error Est√°ndar.</strong> Podr√°s observar c√≥mo, al aumentar el tama√±o de muestra (n), la distribuci√≥n de medias muestrales se aproxima a una distribuci√≥n normal centrada en la media poblacional, mientras que el error est√°ndar (SE = œÉ/‚àön) disminuye. Ambos son conceptos fundamentales para entender la inferencia estad√≠stica, que se aplica en la estimaci√≥n de par√°metros de una poblaci√≥n, como en pruebas de hip√≥tesis o en modelos predictivos explicables como la regresi√≥n lineal al estimar sus par√°metros, de manera independiente de la forma de la distribuci√≥n de la poblaci√≥n.</p>
            </div>
            
            <div class="controls">
                <h2>‚öôÔ∏è Par√°metros de Control</h2>
                
                <div class="control-grid">
                    <div class="control-group">
                        <label for="distribution-type">üîÄ Tipo de Distribuci√≥n:</label>
                        <select id="distribution-type">
                            <option value="uniform">Uniforme</option>
                            <option value="normal">Normal</option>
                            <option value="exponential">Exponencial</option>
                            <option value="bimodal">Bimodal</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="population-mean">üìç Media Poblacional (Œº): <span id="population-mean-value" class="value-display">50</span></label>
                        <input type="range" id="population-mean" min="10" max="90" value="50" step="1">
                    </div>
                    
                    <div class="control-group">
                        <label for="population-sd">üìè Desviaci√≥n Est√°ndar (œÉ): <span id="population-sd-value" class="value-display">15</span></label>
                        <input type="range" id="population-sd" min="1" max="30" value="15" step="1">
                    </div>
                    
                    <div class="control-group">
                        <label for="sample-size">üéØ Tama√±o de Muestra (n): <span id="sample-size-value" class="value-display">5</span></label>
                        <input type="range" id="sample-size" min="1" max="100" value="5" step="1">
                    </div>
                    
                    <div class="control-group">
                        <label for="num-samples">üî¢ N√∫mero de Muestras: <span id="num-samples-value" class="value-display">100</span></label>
                        <input type="range" id="num-samples" min="10" max="1000" value="100" step="10">
                    </div>
                </div>
                
                <div class="buttons">
                    <button class="btn" id="run-simulation">üöÄ Ejecutar Simulaci√≥n</button>
                    <button class="btn" id="reset-simulation">üîÑ Reiniciar</button>
                </div>
            </div>
            
            <div class="visualization">
                <div class="chart-card">
                    <h3>üìà Distribuci√≥n Poblacional</h3>
                    <div class="chart" id="population-chart">
                        Presiona "Ejecutar Simulaci√≥n" para ver el histograma
                    </div>
                </div>
                
                <div class="chart-card">
                    <h3>üé≤ Muestra Individual</h3>
                    <div class="chart" id="sample-chart">
                        Presiona "Ejecutar Simulaci√≥n" para ver la muestra
                    </div>
                    <div class="sample-controls">
                        <button class="sample-btn" id="prev-sample">‚Üê Anterior</button>
                        <span class="sample-info" id="sample-info">Muestra 1 de 100</span>
                        <button class="sample-btn" id="next-sample">Siguiente ‚Üí</button>
                    </div>
                </div>
                
                <div class="chart-card">
                    <h3>üìä Distribuci√≥n de Medias Muestrales</h3>
                    <div class="chart" id="sampling-chart">
                        Presiona "Ejecutar Simulaci√≥n" para ver la distribuci√≥n
                    </div>
                </div>
                
                <div class="chart-card">
                    <h3>üìâ Error Est√°ndar vs Tama√±o de Muestra</h3>
                    <div class="chart" id="error-chart">
                        Presiona "Ejecutar Simulaci√≥n" para ver el gr√°fico
                    </div>
                </div>
            </div>
            
            <div class="results">
                <h2>üìã Resultados de la Simulaci√≥n</h2>
                <div class="results-grid">
                    <div class="result-item">
                        <div class="result-label">Media Poblacional (Œº)</div>
                        <div class="result-value" id="result-pop-mean">-</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Desviaci√≥n Est√°ndar (œÉ)</div>
                        <div class="result-value" id="result-pop-sd">-</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Tama√±o de Muestra (n)</div>
                        <div class="result-value" id="result-sample-size">-</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Error Est√°ndar Te√≥rico</div>
                        <div class="result-value" id="result-theoretical-se">-</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Media de Medias Muestrales</div>
                        <div class="result-value" id="result-sample-means-mean">-</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Error Est√°ndar Emp√≠rico</div>
                        <div class="result-value" id="result-sample-means-sd">-</div>
                    </div>
                </div>
            </div>
            
            <div class="explanation">
                <h2>üìö Explicaci√≥n del Teorema Central del L√≠mite</h2>
                <p><strong>El Teorema Central del L√≠mite (TCL)</strong> establece que, al tomar muestras aleatorias repetidas de tama√±o n de manera indefinida de una poblaci√≥n, se genera una distribuci√≥n de los promedios de las muestras que tiene las siguientes propiedades:</p>
                
                <ul>
                    <li>üéØ <strong>Media igual a la media poblacional (Œº)</strong></li>
                    <li>üìè <strong>Desviaci√≥n est√°ndar igual a la desviaci√≥n est√°ndar poblacional dividida por la ra√≠z cuadrada del tama√±o de la muestra (œÉ/‚àön). Este valor se denomina Error Est√°ndar.</strong></li>
                    <li>üìà <strong>En la medida que el n de las muestras es suficientemente grande (30), la forma de la distribuci√≥n de los promedios se aproxima a la normal</strong></li>
                </ul>
                
                <div class="formula">SE = œÉ/‚àön</div>
                
                <h3>üîç Observaciones clave de esta simulaci√≥n:</h3>
                <ul>
                    <li>üßÆ <strong>La f√≥rmula del Error Est√°ndar (SE = œÉ/‚àön) modela el concepto del teorema central del l√≠mite.</strong></li>
                    <li>üìä <strong>A medida que aumenta el tama√±o de muestra (n), la distribuci√≥n de medias muestrales se vuelve m√°s estrecha (menor variabilidad) y la forma de la distribuci√≥n de medias muestrales se aproxima a una normal incluso cuando la distribuci√≥n poblacional no lo es.</strong></li>
                </ul>
                
                <h3>üéØ Error Est√°ndar Te√≥rico vs Error Est√°ndar Emp√≠rico</h3>
                
                <div class="concept-box teorico">
                    <h4>üßÆ Error Est√°ndar Te√≥rico (œÉ/‚àön)</h4>
                    <p><strong>Definici√≥n:</strong> Es el valor que predice la teor√≠a estad√≠stica usando la f√≥rmula matem√°tica del Teorema Central del L√≠mite.</p>
                    <div class="formula">SE_te√≥rico = œÉ/‚àön</div>
                    <p><strong>Caracter√≠sticas:</strong></p>
                    <ul>
                        <li>Es un <strong>valor calculado</strong> directamente de la f√≥rmula</li>
                        <li>Representa lo que <strong>deber√≠a ocurrir</strong> seg√∫n la teor√≠a</li>
                        <li>Es <strong>constante</strong> para valores fijos de œÉ y n</li>
                        <li>No depende de las muestras espec√≠ficas que tomes</li>
                    </ul>
                </div>
                
                <div class="concept-box empirico">
                    <h4>üéØ Error Est√°ndar Emp√≠rico (Pr√°ctico)</h4>
                    <p><strong>Definici√≥n:</strong> Es el valor que realmente observamos al medir la variabilidad de las medias muestrales en nuestra simulaci√≥n.</p>
                    <p><strong>C√°lculo:</strong> Es la desviaci√≥n est√°ndar de todas las medias muestrales que generamos.</p>
                    <p><strong>Caracter√≠sticas:</strong></p>
                    <ul>
                        <li>Es un <strong>valor observado</strong> de los datos reales</li>
                        <li>Representa lo que <strong>realmente ocurre</strong> en la pr√°ctica</li>
                        <li><strong>Var√≠a ligeramente</strong> cada vez que ejecutas la simulaci√≥n</li>
                        <li>Depende de las muestras espec√≠ficas generadas</li>
                    </ul>
                </div>
                
                <div class="concept-box importante">
                    <h4>üîç ¬øPor qu√© son importantes ambos?</h4>
                    <p><strong>1. Validaci√≥n del Teorema Central del L√≠mite:</strong></p>
                    <ul>
                        <li>Si el TCL es correcto, ambos valores deber√≠an ser <strong>muy similares</strong></li>
                        <li>Cuando aumentas el n√∫mero de muestras, se acercan m√°s</li>
                    </ul>
                    
                    <p><strong>2. Aplicaci√≥n pr√°ctica:</strong></p>
                    <ul>
                        <li><strong>Te√≥rico:</strong> Te permite predecir la precisi√≥n antes de hacer el estudio</li>
                        <li><strong>Emp√≠rico:</strong> Te muestra la precisi√≥n real que obtuviste</li>
                    </ul>
                    
                    <p><strong>3. En la simulaci√≥n puedes observar:</strong></p>
                    <ul>
                        <li>Con pocas muestras (ej: 10), pueden diferir bastante</li>
                        <li>Con muchas muestras (ej: 1000), se vuelven casi id√©nticos</li>
                        <li>Esto <strong>demuestra</strong> que la f√≥rmula te√≥rica funciona</li>
                    </ul>
                </div>
                
                <div class="concept-box ejemplo">
                    <h4>üìä Ejemplo pr√°ctico:</h4>
                    <p>Si tienes: œÉ = 15 y n = 25</p>
                    <p><strong>Error Est√°ndar Te√≥rico</strong> = 15/‚àö25 = 15/5 = <strong>3.0</strong></p>
                    <p><strong>Error Est√°ndar Emp√≠rico</strong> podr√≠a ser <strong>2.97</strong> o <strong>3.03</strong> (muy cercano, pero no exacto)</p>
                    
                    <p><strong>üéØ La diferencia te ense√±a:</strong></p>
                    <ol>
                        <li><strong>Que la teor√≠a funciona</strong> (cuando son similares)</li>
                        <li><strong>El efecto del azar</strong> (la peque√±a diferencia)</li>
                        <li><strong>La importancia del tama√±o de muestra</strong> (a mayor n, m√°s similares)</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        var populationData = [];
        var allSamples = [];
        var sampleMeans = [];
        var currentSampleIndex = 0;
        
        // Configuraci√≥n inicial
        var populationMean = 50;
        var populationSd = 15;
        var sampleSize = 5;
        var numSamples = 100;
        var distributionType = "uniform";
        
        // Funci√≥n para generar n√∫meros aleatorios con distribuci√≥n normal
        function normalRandom(mean, sd) {
            var u = 0, v = 0;
            while(u === 0) u = Math.random();
            while(v === 0) v = Math.random();
            var z = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
            return z * sd + mean;
        }
        
        // Funci√≥n para generar la poblaci√≥n
        function generatePopulation() {
            populationData = [];
            
            for (var i = 0; i < 10000; i++) {
                var value;
                
                switch(distributionType) {
                    case "uniform":
                        var range = Math.sqrt(12) * populationSd;
                        var min = populationMean - range / 2;
                        var max = populationMean + range / 2;
                        value = min + Math.random() * (max - min);
                        break;
                        
                    case "normal":
                        value = normalRandom(populationMean, populationSd);
                        break;
                        
                    case "exponential":
                        var lambda = 1 / populationSd;
                        var shift = populationMean - populationSd;
                        value = -Math.log(Math.random()) / lambda + shift;
                        break;
                        
                    case "bimodal":
                        if (Math.random() < 0.5) {
                            value = normalRandom(populationMean - 20, populationSd/1.5);
                        } else {
                            value = normalRandom(populationMean + 20, populationSd/1.5);
                        }
                        break;
                }
                
                populationData.push(value);
            }
        }
        
        // Funci√≥n para tomar muestras
        function takeSamples() {
            allSamples = [];
            sampleMeans = [];
            
            for (var i = 0; i < numSamples; i++) {
                var sample = [];
                for (var j = 0; j < sampleSize; j++) {
                    var randomIndex = Math.floor(Math.random() * populationData.length);
                    sample.push(populationData[randomIndex]);
                }
                allSamples.push(sample);
                var mean = sample.reduce(function(a, b) { return a + b; }, 0) / sample.length;
                sampleMeans.push(mean);
            }
        }
        
        // Funci√≥n para crear histograma
        function createHistogram(containerId, data, title) {
            var container = document.getElementById(containerId);
            if (!data || data.length === 0) {
                container.innerHTML = html;
        }
        
        // Funci√≥n para actualizar resultados
        function updateResults() {
            var theoreticalSE = populationSd / Math.sqrt(sampleSize);
            var empiricalMean = sampleMeans.reduce(function(a, b) { return a + b; }, 0) / sampleMeans.length;
            var sumSquares = sampleMeans.reduce(function(sum, mean) { 
                return sum + Math.pow(mean - empiricalMean, 2);
            }, 0);
            var empiricalSE = Math.sqrt(sumSquares / (sampleMeans.length - 1));
            
            document.getElementById("result-pop-mean").textContent = populationMean.toFixed(2);
            document.getElementById("result-pop-sd").textContent = populationSd.toFixed(2);
            document.getElementById("result-sample-size").textContent = sampleSize;
            document.getElementById("result-theoretical-se").textContent = theoreticalSE.toFixed(4);
            document.getElementById("result-sample-means-mean").textContent = empiricalMean.toFixed(4);
            document.getElementById("result-sample-means-sd").textContent = empiricalSE.toFixed(4);
        }
        
        // Funci√≥n principal de simulaci√≥n (GLOBAL)
        function runSimulation() {
            console.log("Ejecutando simulaci√≥n...");
            generatePopulation();
            takeSamples();
            currentSampleIndex = 0;
            
            // Actualizar visualizaciones
            createHistogram('population-chart', populationData, 'Distribuci√≥n ' + distributionType.toUpperCase());
            createHistogram('sampling-chart', sampleMeans, 'Distribuci√≥n de Medias Muestrales');
            showSample();
            showErrorChart();
            updateResults();
            
            console.log("Simulaci√≥n completada");
        }
        
        // Funci√≥n para reiniciar (GLOBAL)
        function resetSimulation() {
            populationMean = 50;
            populationSd = 15;
            sampleSize = 5;
            numSamples = 100;
            distributionType = "uniform";
            
            document.getElementById("population-mean").value = 50;
            document.getElementById("population-mean-value").textContent = 50;
            document.getElementById("population-sd").value = 15;
            document.getElementById("population-sd-value").textContent = 15;
            document.getElementById("sample-size").value = 5;
            document.getElementById("sample-size-value").textContent = 5;
            document.getElementById("num-samples").value = 100;
            document.getElementById("num-samples-value").textContent = 100;
            document.getElementById("distribution-type").value = "uniform";
            
            runSimulation();
        }
        
        // Funciones para navegaci√≥n de muestras (GLOBALES)
        function prevSample() {
            if (allSamples.length > 0) {
                currentSampleIndex = (currentSampleIndex - 1 + allSamples.length) % allSamples.length;
                showSample();
            }
        }
        
        function nextSample() {
            if (allSamples.length > 0) {
                currentSampleIndex = (currentSampleIndex + 1) % allSamples.length;
                showSample();
            }
        }
        
        // Inicializaci√≥n cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            // Event listeners para controles
            document.getElementById("population-mean").addEventListener("input", function() {
                populationMean = parseInt(this.value);
                document.getElementById("population-mean-value").textContent = populationMean;
            });
            
            document.getElementById("population-sd").addEventListener("input", function() {
                populationSd = parseInt(this.value);
                document.getElementById("population-sd-value").textContent = populationSd;
            });
            
            document.getElementById("sample-size").addEventListener("input", function() {
                sampleSize = parseInt(this.value);
                document.getElementById("sample-size-value").textContent = sampleSize;
            });
            
            document.getElementById("num-samples").addEventListener("input", function() {
                numSamples = parseInt(this.value);
                document.getElementById("num-samples-value").textContent = numSamples;
            });
            
            document.getElementById("distribution-type").addEventListener("change", function() {
                distributionType = this.value;
            });
            
            // Event listeners para botones
            document.getElementById("run-simulation").addEventListener("click", runSimulation);
            document.getElementById("reset-simulation").addEventListener("click", resetSimulation);
            document.getElementById("prev-sample").addEventListener("click", prevSample);
            document.getElementById("next-sample").addEventListener("click", nextSample);
            
            // Ejecutar simulaci√≥n inicial
            setTimeout(function() {
                runSimulation();
            }, 100);
        });
        
        // Polyfill para String.prototype.padStart si no existe
        if (!String.prototype.padStart) {
            String.prototype.padStart = function padStart(targetLength, padString) {
                targetLength = targetLength >> 0;
                padString = String(typeof padString !== 'undefined' ? padString : ' ');
                if (this.length > targetLength) {
                    return String(this);
                } else {
                    targetLength = targetLength - this.length;
                    if (targetLength > padString.length) {
                        padString += padString.repeat(targetLength / padString.length);
                    }
                    return padString.slice(0, targetLength) + String(this);
                }
            };
        }
        
        // Polyfill para String.prototype.repeat si no existe
        if (!String.prototype.repeat) {
            String.prototype.repeat = function(count) {
                if (count < 0) {
                    throw new RangeError('repeat count must be non-negative');
                }
                if (count == Infinity) {
                    throw new RangeError('repeat count must be less than infinity');
                }
                count = Math.floor(count);
                if (this.length == 0 || count == 0) {
                    return '';
                }
                var result = '';
                for (var i = 0; i < count; i++) {
                    result += this;
                }
                return result;
            };
        }
    </script>
</body>
</html> = "No hay datos para mostrar";
                return;
            }
            
            var min = Math.min.apply(Math, data);
            var max = Math.max.apply(Math, data);
            var bins = 20;
            var binWidth = (max - min) / bins;
            
            // Crear bins
            var histogram = new Array(bins).fill(0);
            data.forEach(function(value) {
                var binIndex = Math.min(Math.floor((value - min) / binWidth), bins - 1);
                histogram[binIndex]++;
            });
            
            // Crear visualizaci√≥n
            var maxCount = Math.max.apply(Math, histogram);
            var html = "<div><strong>" + title + "</strong><br><br>";
            
            for (var i = 0; i < bins; i++) {
                var height = Math.round((histogram[i] / maxCount) * 15);
                var bar = '‚ñà'.repeat(height) + '‚ñë'.repeat(15 - height);
                var binStart = (min + i * binWidth).toFixed(1);
                html += binStart.padStart(6, ' ') + ": " + bar + " (" + histogram[i] + ")<br>";
            }
            
            var mean = data.reduce(function(a, b) { return a + b; }, 0) / data.length;
            html += "<br><strong>Media:</strong> " + mean.toFixed(2);
            html += "<br><strong>Min:</strong> " + min.toFixed(2) + " | <strong>Max:</strong> " + max.toFixed(2);
            html += "</div>";
            
            container.innerHTML = html;
        }
        
        // Funci√≥n para mostrar muestra individual
        function showSample() {
            if (allSamples.length === 0) return;
            
            var sample = allSamples[currentSampleIndex];
            var sampleMean = sampleMeans[currentSampleIndex];
            var container = document.getElementById('sample-chart');
            
            var html = "<div><strong>Muestra " + (currentSampleIndex + 1) + "</strong><br><br>";
            html += "<strong>Valores:</strong><br>";
            
            sample.forEach(function(value, index) {
                html += (index + 1) + ": " + value.toFixed(2) + " ";
                if ((index + 1) % 5 === 0) html += '<br>';
            });
            
            html += "<br><br><strong>Media Muestral:</strong> " + sampleMean.toFixed(3);
            html += "<br><strong>Media Poblacional:</strong> " + populationMean.toFixed(2);
            html += "<br><strong>Diferencia:</strong> " + Math.abs(sampleMean - populationMean).toFixed(3);
            html += "</div>";
            
            container.innerHTML = html;
            document.getElementById('sample-info').textContent = "Muestra " + (currentSampleIndex + 1) + " de " + numSamples;
        }
        
        // Funci√≥n para mostrar error est√°ndar
        function showErrorChart() {
            var container = document.getElementById('error-chart');
            var html = "<div><strong>Error Est√°ndar vs Tama√±o de Muestra</strong><br><br>";
            
            var nValues = [1, 5, 10, 20, 30, 50, 75, 100];
            html += "   n |       SE<br>";
            html += "---- | --------<br>";
            
            nValues.forEach(function(n) {
                var se = (populationSd / Math.sqrt(n)).toFixed(3);
                var isCurrentSize = n === sampleSize;
                var marker = isCurrentSize ? ' ‚Üê ACTUAL' : '';
                html += n.toString().padStart(4, ' ') + " | " + se.padStart(8, ' ') + marker + "<br>";
            });
            
            var currentSE = populationSd / Math.sqrt(sampleSize);
            html += "<br><strong>n actual = " + sampleSize + "</strong>";
            html += "<br><strong>SE actual = " + currentSE.toFixed(4) + "</strong>";
            html += "</div>";
            
            container.innerHTML
