<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador del Teorema Central del Límite</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .content {
            padding: 30px;
        }
        
        .info-box {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(116, 185, 255, 0.3);
        }
        
        .controls {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .controls h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        
        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .control-group {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        
        .control-group label {
            display: block;
            font-weight: bold;
            color: #495057;
            margin-bottom: 10px;
        }
        
        .control-group input[type="range"] {
            width: 100%;
            margin: 10px 0;
            accent-color: #667eea;
        }
        
        .control-group select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            background: white;
            font-size: 14px;
        }
        
        .value-display {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: bold;
            min-width: 50px;
            text-align: center;
            margin-left: 10px;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .visualization {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .chart-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .chart-card h3 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }
        
        .chart {
            width: 100%;
            height: 250px;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-size: 14px;
            position: relative;
        }
        
        .results {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .results h2 {
            margin-bottom: 20px;
            text-align: center;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .result-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }
        
        .result-label {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .result-value {
            font-size: 1.2em;
            color: #a7f3d0;
        }
        
        .explanation {
            background: #f8f9fa;
            border-left: 5px solid #667eea;
            padding: 25px;
            border-radius: 0 10px 10px 0;
        }
        
        .explanation h2 {
            color: #2c3e50;
            margin-bottom: 20px;
        }
        
        .explanation ul {
            margin: 15px 0;
            padding-left: 25px;
        }
        
        .explanation li {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        .sample-controls {
            text-align: center;
            margin-top: 15px;
        }
        
        .sample-btn {
            background: #00b894;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 15px;
            margin: 0 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .sample-btn:hover {
            background: #00a085;
        }
        
        .sample-info {
            margin: 0 15px;
            font-weight: bold;
            color: #495057;
        }
        
        .formula {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            text-align: center;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .control-grid {
                grid-template-columns: 1fr;
            }
            
            .buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 Simulador del Teorema Central del Límite</h1>
            <p>Visualización Interactiva del TCL y Error Estándar</p>
        </div>
        
        <div class="content">
            <div class="info-box">
                <p><strong>📊 Esta aplicación demuestra el Teorema Central del Límite y el concepto de Error Estándar.</strong> Podrás observar cómo, al aumentar el tamaño de muestra (n), la distribución de medias muestrales se aproxima a una distribución normal centrada en la media poblacional, mientras que el error estándar (SE = σ/√n) disminuye. Ambos son conceptos fundamentales para entender la inferencia estadística, que se aplica en la estimación de parámetros de una población, como en pruebas de hipótesis o en modelos predictivos explicables como la regresión lineal al estimar sus parámetros, de manera independiente de la forma de la distribución de la población.</p>
            </div>
            
            <div class="controls">
                <h2>⚙️ Parámetros de Control</h2>
                
                <div class="control-grid">
                    <div class="control-group">
                        <label for="distribution-type">🔀 Tipo de Distribución:</label>
                        <select id="distribution-type">
                            <option value="uniform">Uniforme</option>
                            <option value="normal">Normal</option>
                            <option value="exponential">Exponencial</option>
                            <option value="bimodal">Bimodal</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="population-mean">📍 Media Poblacional (μ): <span id="population-mean-value" class="value-display">50</span></label>
                        <input type="range" id="population-mean" min="10" max="90" value="50" step="1">
                    </div>
                    
                    <div class="control-group">
                        <label for="population-sd">📏 Desviación Estándar (σ): <span id="population-sd-value" class="value-display">15</span></label>
                        <input type="range" id="population-sd" min="1" max="30" value="15" step="1">
                    </div>
                    
                    <div class="control-group">
                        <label for="sample-size">🎯 Tamaño de Muestra (n): <span id="sample-size-value" class="value-display">5</span></label>
                        <input type="range" id="sample-size" min="1" max="100" value="5" step="1">
                    </div>
                    
                    <div class="control-group">
                        <label for="num-samples">🔢 Número de Muestras: <span id="num-samples-value" class="value-display">100</span></label>
                        <input type="range" id="num-samples" min="10" max="1000" value="100" step="10">
                    </div>
                </div>
                
                <div class="buttons">
                    <button class="btn" id="run-simulation">🚀 Ejecutar Simulación</button>
                    <button class="btn" id="reset-simulation">🔄 Reiniciar</button>
                </div>
            </div>
            
            <div class="visualization">
                <div class="chart-card">
                    <h3>📈 Distribución Poblacional</h3>
                    <div class="chart" id="population-chart">
                        <div>Histograma de la población se mostrará aquí</div>
                    </div>
                </div>
                
                <div class="chart-card">
                    <h3>🎲 Muestra Individual</h3>
                    <div class="chart" id="sample-chart">
                        <div>Valores de la muestra actual se mostrarán aquí</div>
                    </div>
                    <div class="sample-controls">
                        <button class="sample-btn" id="prev-sample">← Anterior</button>
                        <span class="sample-info" id="sample-info">Muestra 1 de 100</span>
                        <button class="sample-btn" id="next-sample">Siguiente →</button>
                    </div>
                </div>
                
                <div class="chart-card">
                    <h3>📊 Distribución de Medias Muestrales</h3>
                    <div class="chart" id="sampling-chart">
                        <div>Distribución de medias muestrales se mostrará aquí</div>
                    </div>
                </div>
                
                <div class="chart-card">
                    <h3>📉 Error Estándar vs Tamaño de Muestra</h3>
                    <div class="chart" id="error-chart">
                        <div>Gráfico del Error Estándar se mostrará aquí</div>
                    </div>
                </div>
            </div>
            
            <div class="results">
                <h2>📋 Resultados de la Simulación</h2>
                <div class="results-grid">
                    <div class="result-item">
                        <div class="result-label">Media Poblacional (μ)</div>
                        <div class="result-value" id="result-pop-mean">-</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Desviación Estándar (σ)</div>
                        <div class="result-value" id="result-pop-sd">-</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Tamaño de Muestra (n)</div>
                        <div class="result-value" id="result-sample-size">-</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Error Estándar Teórico</div>
                        <div class="result-value" id="result-theoretical-se">-</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Media de Medias Muestrales</div>
                        <div class="result-value" id="result-sample-means-mean">-</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Error Estándar Empírico</div>
                        <div class="result-value" id="result-sample-means-sd">-</div>
                    </div>
                </div>
            </div>
            
            <div class="explanation">
                <h2>📚 Explicación del Teorema Central del Límite</h2>
                <p><strong>El Teorema Central del Límite (TCL)</strong> establece que, al tomar muestras aleatorias repetidas de tamaño n de manera indefinida de una población, se genera una distribución de los promedios de las muestras que tiene las siguientes propiedades:</p>
                
                <ul>
                    <li>🎯 <strong>Media igual a la media poblacional (μ)</strong></li>
                    <li>📏 <strong>Desviación estándar igual a la desviación estándar poblacional dividida por la raíz cuadrada del tamaño de la muestra (σ/√n). Este valor se denomina Error Estándar.</strong></li>
                    <li>📈 <strong>En la medida que el n de las muestras es suficientemente grande (30), la forma de la distribución de los promedios se aproxima a la normal</strong></li>
                </ul>
                
                <div class="formula">SE = σ/√n</div>
                
                <h3>🔍 Observaciones clave de esta simulación:</h3>
                <ul>
                    <li>🧮 <strong>La fórmula del Error Estándar (SE = σ/√n) modela el concepto del teorema central del límite.</strong></li>
                    <li>📊 <strong>A medida que aumenta el tamaño de muestra (n), la distribución de medias muestrales se vuelve más estrecha (menor variabilidad) y la forma de la distribución de medias muestrales se aproxima a una normal incluso cuando la distribución poblacional no lo es.</strong></li>
                </ul>
                
                <h3>🎯 Error Estándar Teórico vs Error Estándar Empírico</h3>
                
                <div style="background: #e8f5e8; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #28a745;">
                    <h4>🧮 Error Estándar Teórico (σ/√n)</h4>
                    <p><strong>Definición:</strong> Es el valor que predice la teoría estadística usando la fórmula matemática del Teorema Central del Límite.</p>
                    <div class="formula">SE_teórico = σ/√n</div>
                    <p><strong>Características:</strong></p>
                    <ul>
                        <li>Es un <strong>valor calculado</strong> directamente de la fórmula</li>
                        <li>Representa lo que <strong>debería ocurrir</strong> según la teoría</li>
                        <li>Es <strong>constante</strong> para valores fijos de σ y n</li>
                        <li>No depende de las muestras específicas que tomes</li>
                    </ul>
                </div>
                
                <div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ffc107;">
                    <h4>🎯 Error Estándar Empírico (Práctico)</h4>
                    <p><strong>Definición:</strong> Es el valor que realmente observamos al medir la variabilidad de las medias muestrales en nuestra simulación.</p>
                    <p><strong>Cálculo:</strong> Es la desviación estándar de todas las medias muestrales que generamos.</p>
                    <p><strong>Características:</strong></p>
                    <ul>
                        <li>Es un <strong>valor observado</strong> de los datos reales</li>
                        <li>Representa lo que <strong>realmente ocurre</strong> en la práctica</li>
                        <li><strong>Varía ligeramente</strong> cada vez que ejecutas la simulación</li>
                        <li>Depende de las muestras específicas generadas</li>
                    </ul>
                </div>
                
                <div style="background: #f8d7da; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #dc3545;">
                    <h4>🔍 ¿Por qué son importantes ambos?</h4>
                    <p><strong>1. Validación del Teorema Central del Límite:</strong></p>
                    <ul>
                        <li>Si el TCL es correcto, ambos valores deberían ser <strong>muy similares</strong></li>
                        <li>Cuando aumentas el número de muestras, se acercan más</li>
                    </ul>
                    
                    <p><strong>2. Aplicación práctica:</strong></p>
                    <ul>
                        <li><strong>Teórico:</strong> Te permite predecir la precisión antes de hacer el estudio</li>
                        <li><strong>Empírico:</strong> Te muestra la precisión real que obtuviste</li>
                    </ul>
                    
                    <p><strong>3. En la simulación puedes observar:</strong></p>
                    <ul>
                        <li>Con pocas muestras (ej: 10), pueden diferir bastante</li>
                        <li>Con muchas muestras (ej: 1000), se vuelven casi idénticos</li>
                        <li>Esto <strong>demuestra</strong> que la fórmula teórica funciona</li>
                    </ul>
                </div>
                
                <div style="background: #d1ecf1; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #0dcaf0;">
                    <h4>📊 Ejemplo práctico:</h4>
                    <p>Si tienes: σ = 15 y n = 25</p>
                    <p><strong>Error Estándar Teórico</strong> = 15/√25 = 15/5 = <strong>3.0</strong></p>
                    <p><strong>Error Estándar Empírico</strong> podría ser <strong>2.97</strong> o <strong>3.03</strong> (muy cercano, pero no exacto)</p>
                    
                    <p><strong>🎯 La diferencia te enseña:</strong></p>
                    <ol>
                        <li><strong>Que la teoría funciona</strong> (cuando son similares)</li>
                        <li><strong>El efecto del azar</strong> (la pequeña diferencia)</li>
                        <li><strong>La importancia del tamaño de muestra</strong> (a mayor n, más similares)</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales para almacenar datos
        let populationData = [];
        let allSamples = [];
        let sampleMeans = [];
        let currentSampleIndex = 0;
        
        // Configuración inicial
        let populationMean = 50;
        let populationSd = 15;
        let sampleSize = 5;
        let numSamples = 100;
        let distributionType = "uniform";
        
        // Función para generar números aleatorios con distribución normal
        function normalRandom(mean = 0, sd = 1) {
            let u = 0, v = 0;
            while(u === 0) u = Math.random();
            while(v === 0) v = Math.random();
            let z = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
            return z * sd + mean;
        }
        
        // Función para generar la población
        function generatePopulation() {
            populationData = [];
            
            for (let i = 0; i < 10000; i++) {
                let value;
                
                switch(distributionType) {
                    case "uniform":
                        const range = Math.sqrt(12) * populationSd;
                        const min = populationMean - range / 2;
                        const max = populationMean + range / 2;
                        value = min + Math.random() * (max - min);
                        break;
                        
                    case "normal":
                        value = normalRandom(populationMean, populationSd);
                        break;
                        
                    case "exponential":
                        const lambda = 1 / populationSd;
                        const shift = populationMean - populationSd;
                        value = -Math.log(Math.random()) / lambda + shift;
                        break;
                        
                    case "bimodal":
                        if (Math.random() < 0.5) {
                            value = normalRandom(populationMean - 20, populationSd/1.5);
                        } else {
                            value = normalRandom(populationMean + 20, populationSd/1.5);
                        }
                        break;
                }
                
                populationData.push(value);
            }
        }
        
        // Función para tomar muestras
        function takeSamples() {
            allSamples = [];
            sampleMeans = [];
            
            for (let i = 0; i < numSamples; i++) {
                const sample = [];
                for (let j = 0; j < sampleSize; j++) {
                    const randomIndex = Math.floor(Math.random() * populationData.length);
                    sample.push(populationData[randomIndex]);
                }
                allSamples.push(sample);
                sampleMeans.push(sample.reduce((a, b) => a + b, 0) / sample.length);
            }
        }
        
        // Función para crear visualización simple de histograma
        function createSimpleHistogram(containerId, data, title) {
            const container = document.getElementById(containerId);
            const min = Math.min(...data);
            const max = Math.max(...data);
            const bins = 20;
            const binWidth = (max - min) / bins;
            
            // Crear bins
            const histogram = new Array(bins).fill(0);
            data.forEach(value => {
                const binIndex = Math.min(Math.floor((value - min) / binWidth), bins - 1);
                histogram[binIndex]++;
            });
            
            // Crear visualización ASCII simple
            const maxCount = Math.max(...histogram);
            let html = `<div style="font-family: monospace; font-size: 12px; line-height: 1.2;">`;
            html += `<div style="text-align: center; margin-bottom: 10px; font-weight: bold;">${title}</div>`;
            
            for (let i = 0; i < bins; i++) {
                const height = Math.round((histogram[i] / maxCount) * 10);
                const bar = '█'.repeat(height) + '░'.repeat(10 - height);
                const binStart = (min + i * binWidth).toFixed(1);
                html += `<div>${binStart}: ${bar} (${histogram[i]})</div>`;
            }
            
            html += `<div style="margin-top: 10px;">`;
            html += `<strong>Media:</strong> ${(data.reduce((a, b) => a + b, 0) / data.length).toFixed(2)}<br>`;
            html += `<strong>Min:</strong> ${min.toFixed(2)} | <strong>Max:</strong> ${max.toFixed(2)}`;
            html += `</div></div>`;
            
            container.innerHTML = html;
        }
        
        // Función para mostrar muestra individual
        function showSample() {
            if (allSamples.length === 0) return;
            
            const sample = allSamples[currentSampleIndex];
            const sampleMean = sampleMeans[currentSampleIndex];
            const container = document.getElementById('sample-chart');
            
            let html = `<div style="font-family: monospace; font-size: 14px;">`;
            html += `<div style="text-align: center; margin-bottom: 15px; font-weight: bold;">Muestra ${currentSampleIndex + 1}</div>`;
            html += `<div style="display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-bottom: 15px;">`;
            
            sample.forEach((value, index) => {
                html += `<div style="background: #e74c3c; color: white; padding: 5px 8px; border-radius: 5px; font-size: 12px;">`;
                html += `${index + 1}: ${value.toFixed(1)}`;
                html += `</div>`;
            });
            
            html += `</div>`;
            html += `<div style="text-align: center; margin-top: 15px;">`;
            html += `<div style="background: #e74c3c; color: white; padding: 8px; border-radius: 5px; display: inline-block; margin: 5px;">`;
            html += `<strong>Media Muestral:</strong> ${sampleMean.toFixed(2)}`;
            html += `</div>`;
            html += `<div style="background: #27ae60; color: white; padding: 8px; border-radius: 5px; display: inline-block; margin: 5px;">`;
            html += `<strong>Media Poblacional:</strong> ${populationMean.toFixed(2)}`;
            html += `</div>`;
            html += `</div></div>`;
            
            container.innerHTML = html;
            document.getElementById('sample-info').textContent = `Muestra ${currentSampleIndex + 1} de ${numSamples}`;
        }
        
        // Función para mostrar el comportamiento del error estándar
        function showErrorChart() {
            const container = document.getElementById('error-chart');
            let html = `<div style="font-family: monospace; font-size: 12px;">`;
            html += `<div style="text-align: center; margin-bottom: 15px; font-weight: bold;">Error Estándar vs Tamaño de Muestra</div>`;
            
            const nValues = [1, 5, 10, 20, 30, 50, 75, 100];
            html += `<table style="width: 100%; border-collapse: collapse;">`;
            html += `<tr style="background: #f8f9fa;"><th style="padding: 8px; border: 1px solid #dee2e6;">n</th><th style="padding: 8px; border: 1px solid #dee2e6;">SE = σ/√n</th></tr>`;
            
            nValues.forEach(n => {
                const se = (populationSd / Math.sqrt(n)).toFixed(3);
                const isCurrentSize = n === sampleSize;
                const rowStyle = isCurrentSize ? 'background: #fff3cd; font-weight: bold;' : '';
                html += `<tr style="${rowStyle}"><td style="padding: 8px; border: 1px solid #dee2e6; text-align: center;">${n}</td><td style="padding: 8px; border: 1px solid #dee2e6; text-align: center;">${se}</td></tr>`;
            });
            
            html += `</table>`;
            html += `<div style="margin-top: 15px; text-align: center; background: #e74c3c; color: white; padding: 10px; border-radius: 5px;">`;
            html += `<strong>n actual = ${sampleSize}</strong><br>`;
            html += `<strong>SE actual = ${(populationSd / Math.sqrt(sampleSize)).toFixed(4)}</strong>`;
            html += `</div></div>`;
            
            container.innerHTML = html;
        }
        
        // Función para actualizar la tabla de resultados
        function updateResultsTable() {
            const theoreticalSE = populationSd / Math.sqrt(sampleSize);
            const empiricalMean = sampleMeans.reduce((a, b) => a + b, 0) / sampleMeans.length;
            const empiricalSE = Math.sqrt(sampleMeans.reduce((sum, mean) => 
                sum + Math.pow(mean - empiricalMean, 2), 0) / (sampleMeans.length - 1));
            
            document.getElementById("result-pop-mean").textContent = populationMean.toFixed(2);
            document.getElementById("result-pop-sd").textContent = populationSd.toFixed(2);
            document.getElementById("result-sample-size").textContent = sampleSize;
            document.getElementById("result-theoretical-se").textContent = theoreticalSE.toFixed(4);
            document.getElementById("result-sample-means-mean").textContent = empiricalMean.toFixed(4);
            document.getElementById("result-sample-means-sd").textContent = empiricalSE.toFixed(4);
        }
        
        // Función principal de simulación
        function runSimulation() {
            console.log("Ejecutando simulación...");
            generatePopulation();
            takeSamples();
            currentSampleIndex = 0;
            
            // Actualizar visualizaciones
            createSimpleHistogram('population-chart', populationData, `Distribución ${distributionType.toUpperCase()}`);
            createSimpleHistogram('sampling-chart', sampleMeans, 'Distribución de Medias Muestrales');
            showSample();
            showErrorChart();
            updateResultsTable();
            
            console.log("Simulación completada");
        }
        
        // Event listeners para los controles
        document.getElementById("population-mean").addEventListener("input", function() {
            populationMean = parseInt(this.value);
            document.getElementById("population-mean-value").textContent = populationMean;
        });
        
        document.getElementById("population-sd").addEventListener("input", function() {
            populationSd = parseInt(this.value);
            document.getElementById("population-sd-value").textContent = populationSd;
        });
        
        document.getElementById("sample-size").addEventListener("input", function() {
            sampleSize = parseInt(this.value);
            document.getElementById("sample-size-value").textContent = sampleSize;
        });
        
        document.getElementById("num-samples").addEventListener("input", function() {
            numSamples = parseInt(this.value);
            document.getElementById("num-samples-value").textContent = numSamples;
        });
        
        document.getElementById("distribution-type").addEventListener("change", function() {
            distributionType = this.value;
        });
        
        document.getElementById("run-simulation").addEventListener("click", function() {
            console.log("Botón de simulación presionado");
            runSimulation();
        });
        
        document.getElementById("reset-simulation").addEventListener("click", function() {
            console.log("Botón de reset presionado");
            populationMean = 50;
            populationSd = 15;
            sampleSize = 5;
            numSamples = 100;
            distributionType = "uniform";
            
            document.getElementById("population-mean").value = 50;
            document.getElementById("population-mean-value").textContent = 50;
            document.getElementById("population-sd").value = 15;
            document.getElementById("population-sd-value").textContent = 15;
            document.getElementById("sample-size").value = 5;
            document.getElementById("sample-size-value").textContent = 5;
